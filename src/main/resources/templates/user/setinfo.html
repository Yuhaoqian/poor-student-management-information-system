<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>Layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- <link rel="stylesheet" href="//res.layui.com/layui/dist/css/layui.css"  media="all"> -->
  <link rel="stylesheet" href="assets/layui/css/layui.css">
  <link rel="stylesheet" href="css/mylayui.css">
</head>
<body>	
	<ul th:replace="user/shareNav::nav"></ul> 
    <!--导航栏开始-->
    <!--  
    <ul class="layui-nav layui-bg-cyan">
      <li class="layui-nav-item">
      <a href="home">学生信息与贫困资助平台</a></li>
      <li class="layui-nav-item layui-this">
          <a href="">奖助贷</a>
          <dl class="layui-nav-child">
              <dd><a href="fund">资助项目</a></dd>
              <dd><a href="work">勤工助学</a></dd>
          </dl>
      </li>
      <li class="layui-nav-item">
          <a href="vol">志愿活动</a>
      </li>
      <li class="layui-nav-item">
          <a href="show_article">阳光成才</a>     
      </li>
      <li class="layui-nav-item">
        <a href="javascript:;">服务指南</a>
        <dl class="layui-nav-child">
          <dd><a href="question">常见问题FAQ</a></dd>
          <dd><a href="download">文件下载</a></dd>
        </dl>
      </li>
      <li th:if="${session.userName} eq ''" class="layui-nav-item">
          <a href="login" style="font-weight: 800;">
          	登录/注册
          </a>     
      </li>
      <li th:if="${session.userName} ne ''"class="layui-nav-item"><a href="">
          我的消息<span class="layui-badge" th:text = "${session.noticeNum}">9</span></a>
          
      </li>
      <li th:if="${session.userName} ne ''" class="layui-nav-item">
          <a href=""  >
          	<img th:src="${session.avatar_url}" src="img/tx.jpg" class="layui-nav-img">
          </a>
          <dl class="layui-nav-child">
            <dd><a href="javascript:;">我的主页</a></dd>
            <dd><a href="javascript:;">我的申请</a></dd>
            <dd><a href="javascript:;">登出</a></dd>
          </dl>
        </li>
  </ul>
  -->
  <!--导航栏结束-->
    <!--导航栏结束-->
      <!--上方头像开始-->
      <div class="layui-card" style="width: 100%;height: 150px;background-image: url(img/background/infobg.png);margin-bottom:0px;">
            <div class="layui-row">
                <div class="layui-col-md2" style="padding: 20px;padding-left: 50px;">
                    <img th:src="${stu.avatar_url}" src="img/tx.jpg" width="100px" style="border-radius: 100%;display: inline;">
                    <p>
                        <img src="img/icons/star.png" width="25px">
                        <img src="img/icons/star.png" width="25px">
                        <img src="img/icons/star.png" width="25px">
                    </p>
                </div>
                <div class="layui-col-md8" style="font-size: 16px;padding-top: 40px;padding-bottom: 10px;">
                    <p style="padding-bottom: 10px;">
                        <i class="layui-icon" style="color: #1E9FFF;">&#xe60c;</i>
                        <span style="color: white;font-weight: 800;"> 
                        	<span th:text=${stu.s_name}>江芳</span> 
                        	欢迎您！
                        	</span>
                    </p>
                   <p>
                        <i class="layui-icon" style="color: rgb(233, 245, 72);">&#xe770;</i> 
                        <span style="color: white;font-weight: 800;" th:text=${stu.s_major}>软件工程</span>
                   </p>
                   
                </div> 
                <div class="layui-col-md2" style="padding-top: 50px;">
                    <a  th:if="${stu.s_ischeck} eq '-1'" href="showSet">
                        <button type="button" class="layui-btn layui-btn-danger">
						<img src="img/icons/danger.png" class="img-responsive" alt="Cinque Terre" style="display: inline-block;width: 20px;">
						未认证
						</button>
					</a> 
					<a th:if="${stu.s_ischeck} eq '0'" href="#">
                        <button type="button" class="layui-btn layui-btn-warm">
						<img src="img/icons/rz.png" class="img-responsive" alt="Cinque Terre" style="display: inline-block;width: 20px;">
						审核中
                        </button>
                        
					</a>  
					<a th:if="${stu.s_ischeck} eq '1'" href="#">
                        <button type="button" class="layui-btn">
						<img src="img/icons/rz.png" class="img-responsive" alt="Cinque Terre" style="display: inline-block;width: 20px;">
						已认证
						</button>
					</a>
                </div>                            
            </div>
      </div>
      <!--上方头像结束-->
      <div style="padding: 20px; background-color: #F2F2F2;">
        <div class="layui-row layui-col-space15">
            <!-- 个人头像开始 -->

            <!-- 个人头像结束 -->
          <!-- 左边导航开始 -->
          <div class="layui-col-md2" >
            <ul class="layui-nav layui-nav-tree layui-inline" lay-filter="user" style="height: 800px;">
              <li class="layui-nav-item  layui-this">
                <a href="showSet">
                  <i class="layui-icon">&#xe620;</i>
                  账号设置
                </a>
              </li>
              <li class="layui-nav-item ">
                <a href="showStar">
                  <i class="layui-icon">&#xe612;</i>
                  我的收藏
                </a>
              </li>
              <li class="layui-nav-item">
                <a href="showMessage">
                  <i class="layui-icon">&#xe611;</i>
                  我的消息<span class="layui-badge" th:text = "${session.noticeNum}">9</span>
                </a>
              </li>
              <li class="layui-nav-item">
                <a href="showScore">
                  <i class="layui-icon">&#xe609;</i>
                  我的积分
                </a>
              </li>
            </ul>
            
          </div>
          
          <!-- 左边导航结束 -->
          <!-- 右边面板开始 -->
          <div class="layui-col-md10" id="layerDemo">
            <div class="layui-card" style="height: 800px;">
                <!--卡片栏开始-->
                <div class="layui-tab layui-tab-brief" lay-filter="test">
                <ul class="layui-tab-title">
                    <li class="layui-this" lay-id="11">基本信息</li>
                    <li lay-id="22" id ="pk" data-method="notice">贫困认定</li>
       
                    <li lay-id="44">头像设置</li>
                </ul>
                <div class="layui-tab-content" style="height: 100px;">
                    <!--卡片一基本信息开始-->
                    
                    <div class="layui-tab-item layui-show">
                        <form class="layui-form" action="modify_stu_info1" style="width: 500px;" method="post">
                            <div class="layui-form-item">
                              <label for = "stu_id" class="layui-form-label">学号</label>
                              <div class="layui-input-block">
                                <input th:value=${stu.stu_id}  type="text" name="stu_id" autocomplete="off" class="layui-input">
                              </div>
                            </div>
                            <div class="layui-form-item">
                              <label for = "s_name" class="layui-form-label">姓名</label>
                              <div class="layui-input-block">
                                <input th:value=${stu.s_name}  type="text" name="s_name" required  lay-verify="required" placeholder="请输入昵称" autocomplete="off" class="layui-input" id="s_name">
                              </div>
                            </div>
                            <div class="layui-form-item">
                              <label class="layui-form-label">性别</label>
                              <div class="layui-input-block">
                                <input th:checked="${stu.s_sex=='男'  || stu.s_sex == ''}" type="radio" name="s_sex" value="男" title="男" checked>
                                <input th:checked="${stu.s_sex=='女'}"  type="radio" name="s_sex" value="女" title="女" >
                              </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">专业</label>
                                <div class="layui-input-block">
                                <select name="s_major" lay-verify="required">
                                  <option value=""></option>
                                  <option th:selected="${stu.s_major == '软件工程'}" value="软件工程">软件工程</option>
                                  <option th:selected="${stu.s_major == '电气及其自动化'}"  value="电气及其自动化">电气及其自动化</option>
                                  <option th:selected="${stu.s_major == '财务管理'}"  value="财务管理">财务管理</option>
                                  <option th:selected="${stu.s_major == '物流管理'}"  value="物流管理">物流管理</option>
                                  <option th:selected="${stu.s_major == '机械及其自动化'}"  value="机械及其自动化">机械及其自动化</option>
                                  <option th:selected="${stu.s_major == '材料工程'}"  value="材料工程">材料工程</option>
                                </select>
                              </div>
                            </div>
                            <div class="layui-form-item">
                                <label for = "s_email" class="layui-form-label">邮箱</label>
                                <div class="layui-input-block">
                                  <input th:value=${stu.s_email} type="text" name="s_email" lay-verify="email" placeholder="请输入邮箱" autocomplete="off" class="layui-input" id="s_email">
                                </div>
                              </div>
                              <div class="layui-form-item">
                                <label for = "s_phone" class="layui-form-label">电话</label>
                                <div class="layui-input-block">
                                  <input th:value=${stu.s_phone} type="text" name="s_phone" lay-verify="phone" placeholder="请输入电话" autocomplete="off" class="layui-input" id="s_phone">
                                </div>
                              </div>
                            <div class="layui-form-item">
                              <div class="layui-input-block">
                                <button class="layui-btn" lay-submit lay-filter="formDemo" data-method="offset" data-type="auto" οnsubmit="return sumbit_sure()" >立即提交</button>
                              </div>
                            </div>
                        </form>
    
                    </div>
                    <!--卡片一基本信息结束-->
                    <!--卡片二贫困认定开始-->
                    <div class="layui-tab-item" th:fragment="pkrd">
                          <div th:if="${stu.s_ischeck} ne '-1'" class="layui-card" style="background-color: rgba(176, 225, 248, 0.438);border-radius: 20px;">
                            <div class="layui-card-body" style="font-weight: 800;font-size: 16px;">  
                                <p style="font-size: larger;">
                                	<span th:if="${stu.s_ischeck} eq '1'">
	                                	<img src="img/icons/pkrz.png" style="width: 40px;">
	                                   	 认证等级: <span th:text="${stu.poor_level}">3</span>
                                	</span>
                                    
                                    <img src="img/icons/danger2.png" style="width: 30px;">
                                   		<span style="color: red;">非必要不要重复提交贫困认定申请！！</span>
                                  </p>
                                <div class="layui-panel">
                                </div>
                          </div>
                       	</div>
                        <form id = "f2" class="layui-form " action="modify_stu_info2" method = "post" style="width: 760px;">
                            <div class="layui-inline">
                                <label class="layui-form-label">家庭月收入及个人月生活费（单位元）</label>
                                <div class="layui-input-inline" style="width: 100px;">
                                  <input th:value=${stu.s_income} type="text" name="a1" placeholder="￥" autocomplete="off" class="layui-input">
                                </div>
                                
                                <div class="layui-input-inline" style="width: 100px;">
                                  <input th:value=${stu.s_outcome} type="text" name="a2" placeholder="￥" autocomplete="off" class="layui-input">
                                </div>
                              </div>
                              
                            <div class="layui-form-item">
                              <label class="layui-form-label">家庭是否无固定经济来源</label>
                              <div class="layui-input-block">
                                <input th:checked="${b1=='1'  || b1 == ''}" type="radio" name="b1" value="1" title="是" >
                                <input th:checked="${b1=='0' }" type="radio" name="b1" value="0" title="否" checked>
                              </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">家庭所在地区是否为贫困山区</label>
                                <div class="layui-input-block">
                                    <input th:checked="${b2=='1'  || b2 == ''}" type="radio" name="b2" value="1" title="是" >
                                    <input th:checked="${b2=='0' }" type="radio" name="b2" value="0" title="否" checked>
                                </div>
                              </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">是否为孤儿</label>
                                <div class="layui-input-block">
                                    <input th:checked="${b3=='1'  || b3 == ''}" type="radio" name="b3" value="1" title="是" >
                                    <input th:checked="${b3=='0' }"  type="radio" name="b3" value="0" title="否" checked>
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <label class="layui-form-label">是否属于烈士家庭</label>
                                <div class="layui-input-block">
                                    <input th:checked="${b4=='1'  || b4 == ''}" type="radio" name="b4" value="1" title="是" >
                                    <input th:checked="${b4=='0' }"  type="radio" name="b4" value="0" title="否" checked>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">是否属于低保家庭</label>
                                <div class="layui-input-block">
                                    <input th:checked="${b5=='1'  || b5 == ''}" type="radio" name="b5" value="1" title="是" >
                                    <input th:checked="${b5=='0' }"  type="radio" name="b5" value="0" title="否" checked>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">是否属于农村五保户家庭的子女</label>
                                <div class="layui-input-block">
                                    <input th:checked="${b6=='1'  || b6 == ''}" type="radio" name="b6" value="1" title="是" >
                                    <input  th:checked="${b6=='0' }" type="radio" name="b6" value="0" title="否" checked>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label"> 是否家庭双方或一方残疾</label>
                                <div class="layui-input-block">
                                    <input th:checked="${c1=='1'  || c1 == ''}" type="radio" name="c1" value="1" title="是" >
                                    <input th:checked="${c1=='0' }"  type="radio" name="c1" value="0" title="否" checked>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">单亲家庭，只有一方为其提供经济来源</label>
                                <div class="layui-input-block">
                                    <input th:checked="${c2=='1'  || c2 == ''}" type="radio" name="c2" value="1" title="是" >
                                    <input th:checked="${c2=='0' }"  type="radio" name="c2" value="0" title="否" checked>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">多子女上学</label>
                                <div class="layui-input-block">
                                    <input th:checked="${c3=='1'  || c3 == ''}" type="radio" name="c3" value="1" title="是" >
                                    <input th:checked="${c3=='0' }"  type="radio" name="c3" value="0" title="否" checked>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">父母双下岗</label>
                                <div class="layui-input-block">
                                    <input th:checked="${c4=='1'  || c4 == ''}"  type="radio" name="c4" value="1" title="是">
                                    <input th:checked="${c4=='0' }"  type="radio" name="c4" value="0" title="否" checked>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label"> 是否父母纯农户（除农业无其他收入）</label>
                                <div class="layui-input-block">
                                    <input th:checked="${c5=='1'  || c5 == ''}"  type="radio" name="c5" value="1" title="是" >
                                    <input th:checked="${c5=='0' }"  type="radio" name="c5" value="0" title="否" checked>
                                </div>
                            </div>
     
                            <div class="layui-form-item">
                                <label class="layui-form-label">出现其他情况导致家庭极度困难</label>
                                <div class="layui-input-block">
                                    <input th:checked="${d1=='1'  || d1 == ''}"  type="radio" name="d1" value="1" title="是" >
                                    <input th:checked="${d1=='0' }"  type="radio" name="d1" value="0" title="否" checked>
                                </div>
                            </div>
                              <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">其他说明</label>
                                <div class="layui-input-block">
                                  <textarea th:text=${stu.s_other} name="s_other" placeholder="其他特殊情况可在此说明，非必填" class="layui-textarea"></textarea>
                                </div>
                              </div>
                              <div class="layui-form-item">
                                <div class="layui-input-block">
                                  <button id= "pk-btn-submit" class="layui-btn" lay-submit lay-filter="formDemo" >点击提交</button>
                                </div>
                            </div>

                        </form>
                    </div>
                     <!--卡片二贫困认定结束-->
                    <!--卡片四上传头像开始-->
                    <div class="layui-tab-item">
                        <div class="layui-row">
                            <div class="layui-col-md2">
                                <img th:src="${stu.avatar_url}" src="img/tx.jpg" width="150px">
                            </div>
                            
                            <div class="layui-col-md6">
                            	<form enctype="multipart/form-data" action="modifyAvatar" method="post" id="avatar-post">
	                            	 <button type="button" class="layui-btn" id="avatar-btn" style="border-radius: 15px;background-color: darkseagreen;">
	                                    <i class="layui-icon">&#xe67c;</i>点击上传你的头像
	                                </button>
	                                <input type="file" style="visibility: hidden;" name="avatar" id="get-avatar">
	                                
                            	</form>
                               <p style="padding: 10px;font-size: 16px;">在这里设置你的头像……</br>
                                    	请使用2M以内的jpg、gif、png图片。</p>
                            </div>                            
                        </div>

                    </div>
                     <!--卡片四上传头像结束-->
                    
                </div>
                </div> 
            <!--卡片栏结束-->
            </div>
          </div>
          <!-- 右边面板结束 -->

        </div>
      </div> 
<script src="assets/layui/layui.js"></script>
<script src="js/jquery-1.12.4.js"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    layui.use('element', function(){
    var $ = layui.jquery
    ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块

    //触发事件
    var active = {
        tabAdd: function(){
        //新增一个Tab项
        element.tabAdd('demo', {
            title: '新选项'+ (Math.random()*1000|0) //用于演示
            ,content: '内容'+ (Math.random()*1000|0)
            ,id: new Date().getTime() //实际使用一般是规定好的id，这里以时间戳模拟下
        })
        }
        ,tabDelete: function(othis){
        //删除指定Tab项
        element.tabDelete('demo', '44'); //删除：“商品管理” 
        othis.addClass('layui-btn-disabled');
        }
        ,tabChange: function(){
        //切换到指定Tab项
        element.tabChange('demo', '22'); //切换到：用户管理
        }
    };

    $('.site-demo-active').on('click', function(){
        var othis = $(this), type = othis.data('type');
        active[type] ? active[type].call(this, othis) : '';
    });

    //Hash地址的定位
    var layid = location.hash.replace(/^#test=/, '');
    element.tabChange('test', layid);

    element.on('tab(test)', function(elem){
        location.hash = 'test='+ $(this).attr('lay-id');
    });

    });
</script>
<script>
    //Demo
    layui.use('form', function(){
      var form = layui.form;
      
    });
    </script>
<script>
    layui.use('layer', function(){ //独立版的layer无需执行这一句
      var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句  
      //触发事件
      var active = {
       notice: function(){
          //示范一个公告层
          layer.open({
            type: 1
            ,title: false //不显示标题栏
            ,closeBtn: false
            ,area: '300px;'
            ,shade: 0.8
            ,id: 'LAY_layuipro' //设定一个id，防止重复弹出
            ,btn: ['我明白了']
            ,btnAlign: 'c'
            ,moveType: 1 //拖拽模式，0或者1
            ,content: '<div style="padding: 50px; line-height: 22px; background-color: rgb(211,49,49);color: white; font-weight: 300;">以下内容下述内容是评定贫困程度的重要依据。<br><br>请根据家庭实际情况如实填写，并将相应的证明材料交给院系负责人。<br><br>若发现存在信息不实或将取消贫困生身份，并通报批评!!</div>'
          });
        }
        
      };
    $('#pk').on('click', function(){
        var othis = $(this), method = othis.data('method');
        active[method] ? active[method].call(this, othis) : '';
        
      });
    });
    </script>
<!-- 
<script>
layui.use('layer', function(){ //独立版的layer无需执行这一句
  var $ = layui.jquery, layer = layui.layer; //独立版的layer无需执行这一句
  //触发事件
  var active = {
    offset: function(othis){
      var type = othis.data('type');
      layer.open({
        type: 1
        ,offset: type //具体配置参考：http://www.layui.com/doc/modules/layer.html#offset
        ,id: 'layerDemo'+type //防止重复弹出
        ,content: '<div style="padding: 20px 100px;"> 修改成功 </div>'
        ,btn: '关闭'
        ,btnAlign: 'c' //按钮居中
        ,shade: 0 //不显示遮罩
        ,yes: function(){
          layer.closeAll();
        }
      });
    }
  };
  
  $('#layerDemo .layui-btn').on('click', function(){
    var othis = $(this), method = othis.data('method');
    active[method] ? active[method].call(this, othis) : '';
  });
  
});
</script> -->
<script>
layui.use('upload', function(){
  var upload = layui.upload;
   
  //执行实例
  var uploadInst = upload.render({
    elem: '#upload-btn' //绑定元素
    ,url: 'http://127.0.0.1:8080/poor-student-mis/modifyAvatar' //上传接口
    ,accept: 'file'
    ,done: function(res){
          layui.use('layer', function(){
              var layer = layui.layer;
                layer.msg(res.url, {
                       time: 1000, //6s后自动关闭
                       icon:1
                 });
            });
    }
    ,error: function(){
      //请求异常回调
    }
  });
});
</script>
<script>
$(function () {
	$('#avatar-btn').on('click', function () {
	    return $('#get-avatar').click();
	});

	$('#get-avatar').change(function () {
	    $('#avatar-post').submit();
	});	
})

</script>
</body>
</html>